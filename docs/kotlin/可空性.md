# 可空性

### 类型参数的可空性

Kotlin中所有泛型类和泛型函数的类型参数默认都是可空的。任何类型，包括可空类型在内，都可以替换类型参数。这种情况下，使用类型参数作为类型的声明都允许为null，尽管类型参数T并没有用问号结尾。

```kotlin
fun <T> printHashCode(t: T) {
    println(t?.hashCode())		// 因为"t"可能为null，所以必须使用安全调用
}

>>> printHashCode(null)			// "T"被推导成"Any?"
null
```

类型参数T推导出的类型是可空类型Any？。因此，尽管没有用问好结尾，实参t仍然允许持有null。

要是类型参数非空，必须要为它指定一个非空的上界，那样泛型会拒绝可空值作为实参。

必须使用问号结尾来标记类型为可空的，没有问号就是非空的。类型参数是这个规则唯一的例外。

### 可空性和集合

Kotlin完全支持类型参数的可空性。就像变量的类型可以加上？字符来表示变量可以持有null一样，类型在被当作类型参数时，也可以用同样的方式标记。

变量自己类型的可空性和用作类型参数的类型的可空性是有区别的。**要小心决定什么是可空的：集合的元素还是集合本身？**

### 只读集合与可变集合

Kotlin的集合设计和Java不同的一项重要特质是：它把访问集合数据的接口和修改集合数据的接口分开了。这种区别存在于最基础的使用集合的接口之中：kotlin.collections.Collection。这个接口没有任何添加或移除元素的方法。使用kotlin.collections.MutableCollection接口可以修改集合中的数据。

一般的规则是在代码的任何地方都应该使用只读接口，只在代码需要修改集合的地方使用可变接口的变体。

使用集合接口时需要牢记一个关键点：**只读集合不一定时不可变的**。

